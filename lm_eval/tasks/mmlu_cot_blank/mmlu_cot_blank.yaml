tag: "mmlu_cot_blank"
dataset_name: mmlu_cot_blank
dataset_path: hails/mmlu_no_train  # 修复点：冒号后添加空格，路径无需引号（无特殊字符时）
subset:
  - "abstract_algebra"
  - "anatomy"
  - "astronomy"
  - "biology"
  - "chemistry"
  # 计算机与工程
  - "college_computer_science"
  - "computer_security"
  - "engineering"
  # 数学与物理
  - "college_mathematics"
  - "college_physics"
  - "conceptual_physics"
  - "linear_algebra"
  - "physics"
  # 医学与健康
  - "college_medicine"
  - "clinical_knowledge"
  - "health_science"
  - "high_school_biology"
  - "high_school_chemistry"
  - "high_school_physics"
validation_split: validation
fewshot_split: dev
process_docs: !function utils.process_docs
output_type: generate_until
doc_to_text: "Q: {{question.strip()}}\nA: Let's think step by step, then fill in the blank with the correct answer."
process_results: !function utils.process_results
doc_to_target: "{{answer}}"
filter_list:
  - name: "strict-match"
    filter:
      - function: "regex"
        regex_pattern: "((?<=Answer: )(.*?)(?=\\n|$)|(?<=The answer is )(.*?)(?=\\n|$)|(?<=Final answer: )(.*?)(?=\\n|$))"
      - function: "take_first"
  - name: "flexible-extract"
    filter:
      - function: "regex"
        regex_pattern: "([A-Za-z0-9\\-\\.\\s]+)$"
        ignore_case: true
        ignore_punctuation: true
      - function: "take_first"
generation_kwargs:
  until:
    - "</s>"
    - "Q:"
    - "<|im_end|>"
  do_sample: false
  temperature: 0.0
  max_new_tokens: 512
num_fewshot: 0
metric_list:
  - metric: exact_match
    aggregation: mean
    higher_is_better: true
    ignore_case: true
    ignore_punctuation: true
  - metric: partial_match
    aggregation: mean
    higher_is_better: true
    ignore_case: true
    ignore_punctuation: true
metadata:
  version: 1.0
  description: "MMLU variant with blank-filling questions requiring chain-of-thought reasoning"
dataset_kwargs:
  trust_remote_code: true

